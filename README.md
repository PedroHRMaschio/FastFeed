
---

# **FastFeed**

A Python + FastAPI social-media backend featuring authentication, photo uploads, data validation, a relational database and a real-time feed of posts from other users.
Inspired by the first versions of Instagram ‚Äî built for study, practice and portfolio presentation.

---

## üöÄ Features

* User authentication (register/login)
* Post photos with captions
* View a feed with posts from other accounts
* Database-backed storage
* Data validation with FastAPI & Pydantic

---

## üõ† Tech Stack

| Category          | Technology                | Purpose                         |
|-------------------|---------------------------|---------------------------------|
| **Core**          | Python 3.14+              | Modern language features        |
| **Framework**     | FastAPI                   | High-performance async API      |
| **Database**      | SQLAlchemy + Aiosqlite    | Async ORM & persistence         |
| **Auth**          | JWT + FastAPI Users       | Secure authentication flow      |
| **Storage**       | ImageKit                  | Media optimization & CDN        |
| **Frontend**      | Streamlit                 | Rapid UI prototyping            |
| **Tools**         | uv                        | Fast package management         |
| **Container**     | Docker                    | Containerization                |
| **Orchestration** | Docker Compose            | Container orchestration         |
| **Versioning**    | Git                       | Version control                 |

---

## üèó Architecture

The project follows a modular architecture:

- **Core**: Configuration, database connection, and base utilities
- **Models**: SQLAlchemy database models
- **Schemas**: Pydantic models for data validation and serialization
- **Routers**: API endpoints grouped by feature (Auth, Posts, Users)
- **Frontend**: Streamlit application consuming the API

### Data Flow
1. Client Request ‚Üí FastAPI Router
2. Router ‚Üí Pydantic Validation
3. Router ‚Üí Service Logic (Uploads, DB operations)
4. Response ‚Üí Client (JSON)

---

## üì¶ Installation

Clone this repository:

```bash
git clone https://github.com/PedroHRMaschio/FastFeed.git
cd FastFeed
```

Install dependencies (this will automatically create a virtual environment):

```bash
uv sync
```

---

## ‚öôÔ∏è Configuration

Create a `.env` file in the root directory with the following variables:

```bash
# JWT Authentication
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_LIFETIME=3600

# ImageKit Configuration
IMAGEKIT_URL=https://ik.imagekit.io/your-imagekit-id
IMAGEKIT_PUBLIC_KEY=your-imagekit-public-key
IMAGEKIT_FILE_KEY=your-imagekit-private-key
```

> [!TIP]
> A template file `.env.example` is provided in the repository. Copy it to `.env` and fill in your actual values.

**Getting ImageKit Credentials:**
1. Sign up for a free account at [ImageKit.io](https://imagekit.io/)
2. Go to your dashboard ‚Üí Developer Options
3. Copy your URL endpoint, Public Key, and Private Key
4. Paste them into your `.env` file

---

## ‚ñ∂ Running the Project

### 1. Start the Backend

Start the API server:

```bash
uv run main.py
```

Access documentation automatically generated by FastAPI:

```
http://localhost:8000/docs
```

### 2. Start the Frontend

Start the Streamlit app:

```bash
uv run streamlit run frontend.py
```
Access the application:

```
http://localhost:8501
```

---

---

## üß™ Testing

This project uses **pytest** for unit and integration testing.

### Running Tests

Run all tests with:

```bash
uv run pytest
```

To run tests with verbose output:

```bash
uv run pytest -v
```

### Test Structure

- `tests/conftest.py`: Test configuration and fixtures (database, client).
- `tests/test_app.py`: General application tests (health checks).
- `tests/test_media.py`: Unit tests for media utility functions (mocked ImageKit).

### Code Coverage

To generate a code coverage report (automatically configured in `pyproject.toml`):

```bash
uv run pytest
```

The configuration in `pyproject.toml` automatically adds `--cov=src` and `--cov-report=term-missing`.

For an HTML report (useful for visualizing missing lines):

```bash
uv run pytest --cov-report=html
```
Then open `htmlcov/index.html` in your browser.

---

## üê≥ Running with Docker

You can run the entire stack (Backend, Frontend, and Database) with a single command using Docker Compose.

### Prerequisites
- Docker & Docker Compose installed

### Steps

1. Create a `.env` file with your credentials (see Configuration section).
2. Run the stack:
   ```bash
   docker-compose up --build
   ```

   This will start:
   - **Backend**: http://localhost:8000
   - **Frontend**: http://localhost:8501
   - **PostgreSQL**: Port 5432

---

## üó∫ Roadmap

* [x] Add JWT authentication
* [x] Enable image storage (ImageKit)
* [x] Build UI for user interaction
* [ ] Add comments + likes system
* [ ] Add notifications feed

---

## üìú License

This project is open-source and free to use.

---

## üëè Acknowledgments

- Core project concept and initial logic inspired by **[Tech With Tim - Learn Fast API With This ONE Project](https://www.youtube.com/watch?v=SR5NYCdzKkc)**.
- Refactored and enhanced by **PedroHRMaschio** with:
    - Modular architecture
    - Async database implementation
    - Professional production configuration
    - Type safety and documentation
